<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#2962ff">
  <title>üöÄ Telegram Clicker Pro v1.0.0</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #2962ff;
      --secondary: #00c853;
      --background: #f5f7ff;
      --card-bg: #ffffff;
      --text: #1a1a1a;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --particle: #2962ff;
      --success: #00c853;
      --warning: #ffab00;
      --danger: #ff5252;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --background: #121212;
        --card-bg: #1e1e1e;
        --text: #ffffff;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        --particle: #4da6ff;
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: var(--background);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-x: hidden;
      transition: background 0.3s ease;
    }

    .container {
      width: 100%;
      max-width: 500px;
      text-align: center;
    }

    .header {
      margin-bottom: 25px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .logo-icon {
      font-size: 2.2rem;
      background: linear-gradient(45deg, var(--primary), #651fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: pulse 2s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    h1 {
      font-size: 2.2rem;
      font-weight: 800;
      background: linear-gradient(45deg, var(--primary), #651fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 5px;
      text-shadow: 0 2px 5px rgba(41, 98, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .version {
      font-size: 0.85rem;
      background: rgba(41, 98, 255, 0.15);
      color: var(--primary);
      padding: 2px 8px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: -5px;
    }

    .subtitle {
      color: #888;
      font-size: 1.05rem;
      margin-top: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .stats-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .stat-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 14px;
      min-width: 110px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      border: 1px solid rgba(0, 0, 0, 0.03);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.12);
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 5px 0;
      background: linear-gradient(45deg, var(--primary), #651fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .stat-label {
      font-size: 0.9rem;
      color: #999;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .counter-display {
      font-size: 5rem;
      font-weight: 800;
      margin: 20px 0;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
      position: relative;
      animation: fadeIn 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .click-btn {
      background: linear-gradient(45deg, var(--primary), #651fff);
      color: white;
      border: none;
      border-radius: 24px;
      padding: 18px 45px;
      font-size: 1.8rem;
      font-weight: 700;
      margin: 25px 0;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(41, 98, 255, 0.4);
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      min-width: 280px;
      transform: scale(1);
      text-align: center;
    }

    .click-btn:active {
      transform: scale(0.96);
      box-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
    }

    .click-btn:hover {
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 8px 25px rgba(41, 98, 255, 0.5);
    }

    .click-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20px;
      height: 200%;
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(30deg);
      transition: all 0.6s;
    }

    .click-btn:hover::after {
      left: 120%;
    }

    .btn-container {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }

    .action-btn {
      background: var(--card-bg);
      border: none;
      border-radius: 16px;
      padding: 12px 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-width: 130px;
      border: 1px solid rgba(0, 0, 0, 0.05);
      text-align: center;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .reset-btn {
      color: var(--danger);
    }

    .share-btn {
      color: var(--primary);
    }

    .settings-btn {
      color: #651fff;
    }

    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      background: var(--particle);
      opacity: 0.8;
      pointer-events: none;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #ff0;
      opacity: 0.8;
    }

    .achievement {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(45deg, var(--primary), #651fff);
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
      transform: translateX(200%);
      transition: transform 0.3s ease-out;
      z-index: 1000;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      max-width: 300px;
    }

    .achievement.show {
      transform: translateX(0);
    }

    .achievement.success {
      background: linear-gradient(45deg, var(--success), #00e676);
    }

    .achievement.warning {
      background: linear-gradient(45deg, var(--warning), #ffd600);
    }

    .settings-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .settings-modal.show {
      opacity: 1;
      pointer-events: all;
    }

    .modal-title {
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: var(--primary);
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      transform: scale(0.9);
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .settings-modal.show .modal-content {
      transform: scale(1);
    }

    .setting-option {
      margin: 15px 0;
      padding: 12px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .setting-label {
      display: block;
      font-weight: 600;
      font-size: 1.05rem;
      margin: 0;
    }

    .toggle {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
      flex-shrink: 0;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--primary);
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    @media (max-width: 480px) {
      .counter-display {
        font-size: 4rem;
      }
      
      .click-btn {
        padding: 15px 35px;
        font-size: 1.5rem;
        min-width: 240px;
      }
      
      .stat-value {
        font-size: 1.5rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .btn-container {
        gap: 8px;
      }
      
      .action-btn {
        min-width: 110px;
        padding: 10px 12px;
        font-size: 0.95rem;
      }
    }

    .share-modal {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--card-bg);
      border-radius: 24px 24px 0 0;
      padding: 25px 20px;
      transform: translateY(100%);
      transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      z-index: 900;
      box-shadow: 0 -5px 35px rgba(0, 0, 0, 0.15);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .share-modal.show {
      transform: translateY(0);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 1.8rem;
      color: #888;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .close-modal:hover {
      background: rgba(0, 0, 0, 0.05);
      color: var(--text);
      transform: rotate(90deg);
    }

    .share-message {
      font-size: 1.1rem;
      margin-bottom: 20px;
      line-height: 1.5;
      color: var(--text);
      background: rgba(0, 0, 0, 0.03);
      border-radius: 12px;
      padding: 15px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .share-buttons {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .telegram-share {
      background: linear-gradient(45deg, #0088cc, #00bfff);
      color: white;
      flex: 1;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 136, 204, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .achievement-icon {
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pulse {
      animation: pulse 1s infinite;
    }

    .counter-animation {
      animation: jump 0.3s ease;
    }

    @keyframes jump {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .streak-display {
      font-size: 1.1rem;
      margin-top: 5px;
      color: var(--warning);
      font-weight: 600;
      min-height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .streak-bar {
      height: 6px;
      background: rgba(255, 171, 0, 0.2);
      border-radius: 3px;
      margin: 8px auto;
      overflow: hidden;
      max-width: 300px;
    }

    .streak-progress {
      height: 100%;
      background: var(--warning);
      border-radius: 3px;
      width: 0%;
      transition: width 0.5s ease;
    }

    .new-record {
      animation: new-record 1.5s ease;
    }

    @keyframes new-record {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(0, 200, 83, 0.7); }
    }

    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2000;
    }

    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 20px;
      opacity: 0;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 1.8rem;
      color: #888;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .close-modal:hover {
      background: rgba(0, 0, 0, 0.05);
      color: var(--text);
      transform: rotate(90deg);
    }

    .share-message {
      font-size: 1.1rem;
      margin-bottom: 20px;
      line-height: 1.5;
      color: var(--text);
      background: rgba(0, 0, 0, 0.03);
      border-radius: 12px;
      padding: 15px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .share-buttons {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .telegram-share {
      background: linear-gradient(45deg, #0088cc, #00bfff);
      color: white;
      flex: 1;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 136, 204, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .achievement-icon {
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pulse {
      animation: pulse 1s infinite;
    }

    .counter-animation {
      animation: jump 0.3s ease;
    }

    @keyframes jump {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">
        <i class="fas fa-bolt logo-icon"></i>
        <h1>CLICKER PRO</h1>
      </div>
      <div class="version">v1.0.0</div>
      <div class="subtitle">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</div>
    </div>

    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-value" id="total-clicks">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="max-streak">0</div>
        <div class="stat-label">–ú–∞–∫—Å. —Å—Ç—Ä–∏–∫</div>
      </div>
    </div>

    <div class="counter-display" id="counter">0</div>
    <div class="streak-display" id="streak-display">–°–µ—Ä–∏—è: 0</div>
    <div class="streak-bar">
      <div class="streak-progress" id="streak-bar"></div>
    </div>
    
    <button class="click-btn pulse" id="click-btn">
      <i class="fas fa-bolt"></i> +1
    </button>
    
    <div class="btn-container">
      <button class="action-btn reset-btn" id="reset-btn">
        <i class="fas fa-redo"></i> –°–±—Ä–æ—Å–∏—Ç—å
      </button>
      <button class="action-btn share-btn" id="share-btn">
        <i class="fas fa-share-alt"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
      </button>
      <button class="action-btn settings-btn" id="settings-btn">
        <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
      </button>
    </div>
  </div>

  <div class="particles" id="particles"></div>
  <div class="confetti-container" id="confetti-container"></div>
  
  <div class="achievement" id="achievement">
    <i class="fas fa-trophy achievement-icon"></i>
    <span id="achievement-text">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!</span>
  </div>

  <div class="settings-modal" id="settings-modal">
    <div class="modal-content">
      <h2 class="modal-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
      
      <div class="setting-option">
        <label class="setting-label">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</label>
        <label class="toggle">
          <input type="checkbox" id="sound-toggle" checked>
          <span class="slider"></span>
        </label>
      </div>
      
      <div class="setting-option">
        <label class="setting-label">–í–∏–±—Ä–∞—Ü–∏—è</label>
        <label class="toggle">
          <input type="checkbox" id="vibration-toggle" checked>
          <span class="slider"></span>
        </label>
      </div>
      
      <div class="setting-option">
        <label class="setting-label">–ê–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å—Ç–∏—Ü</label>
        <label class="toggle">
          <input type="checkbox" id="particles-toggle" checked>
          <span class="slider"></span>
        </label>
      </div>
      
      <div class="setting-option">
        <label class="setting-label">–ê–≤—Ç–æ-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</label>
        <label class="toggle">
          <input type="checkbox" id="autosave-toggle" checked>
          <span class="slider"></span>
        </label>
      </div>
      
      <button class="action-btn" id="close-settings" style="margin-top: 20px; width: 100%; background: var(--primary); color: white;">
        <i class="fas fa-check"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
      </button>
    </div>
  </div>

  <div class="share-modal" id="share-modal">
    <div class="modal-header">
      <h3>üèÜ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</h3>
      <button class="close-modal" id="close-share-modal">&times;</button>
    </div>
    <p class="share-message">–Ø –Ω–∞–±—Ä–∞–ª <strong id="share-count">0</strong> –æ—á–∫–æ–≤ –≤ Telegram Clicker Pro! –ú–æ–π –ª—É—á—à–∏–π —Å—Ç—Ä–∏–∫: <span id="share-streak">0</span>. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–±–∏—Ç—å –º–æ–π —Ä–µ–∫–æ—Ä–¥!</p>
    <div class="share-buttons">
      <button class="action-btn telegram-share" id="telegram-share">
        <i class="fab fa-telegram"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram
      </button>
    </div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    Telegram.WebApp.expand();
    Telegram.WebApp.ready();
    
    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const counterElement = document.getElementById('counter');
    const totalClicksElement = document.getElementById('total-clicks');
    const maxStreakElement = document.getElementById('max-streak');
    const clickBtn = document.getElementById('click-btn');
    const resetBtn = document.getElementById('reset-btn');
    const shareBtn = document.getElementById('share-btn');
    const settingsBtn = document.getElementById('settings-btn');
    const streakDisplay = document.getElementById('streak-display');
    const streakBar = document.getElementById('streak-bar');
    const particlesContainer = document.getElementById('particles');
    const achievementElement = document.getElementById('achievement');
    const achievementText = document.getElementById('achievement-text');
    const settingsModal = document.getElementById('settings-modal');
    const shareModal = document.getElementById('share-modal');
    const closeSettings = document.getElementById('close-settings');
    const closeShareModal = document.getElementById('close-share-modal');
    const telegramShare = document.getElementById('telegram-share');
    const shareCount = document.getElementById('share-count');
    const shareStreak = document.getElementById('share-streak');
    const confettiContainer = document.getElementById('confetti-container');
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ localStorage
    let settings = {
      sound: localStorage.getItem('clicker_sound') !== 'false',
      vibration: localStorage.getItem('clicker_vibration') !== 'false',
      particles: localStorage.getItem('clicker_particles') !== 'false',
      autosave: localStorage.getItem('clicker_autosave') !== 'false'
    };
    
    // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    let gameState = {
      count: 0,
      totalClicks: 0,
      streak: 0,
      maxStreak: 0,
      lastClickTime: 0,
      startTime: Date.now()
    };
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—É–∫–∞
    let audioContext;
    let clickSound;
    let audioInitialized = false;
    
    function initAudio() {
      if (audioInitialized) return;
      
      try {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const gainNode = audioContext.createGain();
        gainNode.gain.value = 0.2;
        gainNode.connect(audioContext.destination);
        
        // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π –∑–≤—É–∫ –∫–ª–∏–∫–∞
        clickSound = {
          play: () => {
            if (!settings.sound || !audioContext) return;
            
            // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∞—É–¥–∏–æ–∫–æ–Ω—Ç–µ–∫—Å—Ç, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
            if (audioContext.state === 'suspended') {
              audioContext.resume();
            }
            
            const oscillator = audioContext.createOscillator();
            const envelope = audioContext.createGain();
            
            oscillator.type = 'sine';
            oscillator.frequency.value = 800;
            
            envelope.gain.value = 0.1;
            envelope.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);
            
            oscillator.connect(envelope);
            envelope.connect(gainNode);
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.1);
          }
        };
        
        audioInitialized = true;
      } catch (e) {
        console.log('Web Audio API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', e);
      }
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∏–±—Ä–∞—Ü–∏–∏
    const hasVibration = !!navigator.vibrate;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
    function initSettings() {
      document.getElementById('sound-toggle').checked = settings.sound;
      document.getElementById('vibration-toggle').checked = settings.vibration;
      document.getElementById('particles-toggle').checked = settings.particles;
      document.getElementById('autosave-toggle').checked = settings.autosave;
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
      document.getElementById('sound-toggle').addEventListener('change', (e) => {
        settings.sound = e.target.checked;
        localStorage.setItem('clicker_sound', settings.sound);
      });
      
      document.getElementById('vibration-toggle').addEventListener('change', (e) => {
        settings.vibration = e.target.checked;
        localStorage.setItem('clicker_vibration', settings.vibration);
      });
      
      document.getElementById('particles-toggle').addEventListener('change', (e) => {
        settings.particles = e.target.checked;
        localStorage.setItem('clicker_particles', settings.particles);
      });
      
      document.getElementById('autosave-toggle').addEventListener('change', (e) => {
        settings.autosave = e.target.checked;
        localStorage.setItem('clicker_autosave', settings.autosave);
      });
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    function loadGameState() {
      const savedState = localStorage.getItem('clicker_game_state');
      if (savedState) {
        try {
          const parsedState = JSON.parse(savedState);
          gameState = {
            ...gameState,
            ...parsedState
          };
        } catch (e) {
          console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è', e);
        }
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
      updateUI();
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    function saveGameState() {
      if (!settings.autosave) return;
      localStorage.setItem('clicker_game_state', JSON.stringify(gameState));
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
    function updateUI() {
      counterElement.textContent = gameState.count;
      totalClicksElement.textContent = gameState.totalClicks;
      maxStreakElement.textContent = gameState.maxStreak;
      streakDisplay.textContent = `–°–µ—Ä–∏—è: ${gameState.streak}`;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —Å—Ç—Ä–∏–∫–∞
      const streakPercentage = Math.min(100, (gameState.streak / Math.max(10, gameState.maxStreak)) * 100);
      streakBar.style.width = `${streakPercentage}%`;
      
      // –ï—Å–ª–∏ –Ω–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥
      if (gameState.streak > 0 && gameState.streak === gameState.maxStreak) {
        streakDisplay.classList.add('new-record');
        setTimeout(() => {
          streakDisplay.classList.remove('new-record');
        }, 1500);
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —à–µ—Ä–∏–Ω–≥–∞
      shareCount.textContent = gameState.count;
      shareStreak.textContent = gameState.maxStreak;
    }
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞
    function playSound() {
      if (settings.sound && clickSound) {
        try {
          clickSound.play();
        } catch (e) {
          console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞', e);
        }
      }
    }
    
    // –í–∏–±—Ä–∞—Ü–∏—è
    function vibrate() {
      if (settings.vibration && hasVibration) {
        navigator.vibrate(30);
      }
    }
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
    function createParticles(x, y) {
      if (!settings.particles) return;
      
      const colors = ['#2962ff', '#00c853', '#ffab00', '#ff5252', '#651fff'];
      const particleCount = 15;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        // –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        const size = Math.random() * 8 + 4;
        const color = colors[Math.floor(Math.random() * colors.length)];
        const angle = Math.random() * Math.PI * 2;
        const velocity = Math.random() * 3 + 1;
        const duration = Math.random() * 800 + 400;
        
        // –ü–æ–∑–∏—Ü–∏—è - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—á–∫—É –∫–ª–∏–∫–∞ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä, –∞ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
        const offsetX = (Math.random() - 0.5) * 40;
        const offsetY = (Math.random() - 0.5) * 40;
        
        // –°—Ç–∏–ª–∏ —á–∞—Å—Ç–∏—Ü—ã
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = color;
        particle.style.left = `${x + offsetX}px`;
        particle.style.top = `${y + offsetY}px`;
        particle.style.boxShadow = `0 0 ${size}px ${color}`;
        particle.style.position = 'absolute';
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        
        particlesContainer.appendChild(particle);
        
        // –ê–Ω–∏–º–∞—Ü–∏—è - –±–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
        const moveX = Math.cos(angle) * velocity * 30;
        const moveY = Math.sin(angle) * velocity * 30;
        
        setTimeout(() => {
          particle.style.transition = `all ${duration}ms cubic-bezier(0.2, 0.8, 0.4, 1)`;
          particle.style.transform = `translate(${moveX}px, ${moveY}px) scale(0)`;
          particle.style.opacity = '0';
          
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, duration);
        }, 10);
      }
    }
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
    function showAchievement(text, type = 'info') {
      achievementText.textContent = text;
      achievementElement.className = 'achievement';
      
      if (type === 'success') {
        achievementElement.classList.add('success');
      } else if (type === 'warning') {
        achievementElement.classList.add('warning');
      }
      
      achievementElement.classList.add('show');
      
      setTimeout(() => {
        achievementElement.classList.remove('show');
      }, 3000);
    }
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function createConfetti() {
      confettiContainer.innerHTML = '';
      
      const colors = ['#2962ff', '#00c853', '#ffab00', '#ff5252', '#651fff'];
      const confettiCount = 100;
      
      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti-piece';
        
        // –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        const color = colors[Math.floor(Math.random() * colors.length)];
        const size = Math.random() * 8 + 4;
        const left = Math.random() * 100;
        const delay = Math.random() * 1000;
        const duration = Math.random() * 2000 + 2000;
        
        confetti.style.backgroundColor = color;
        confetti.style.left = `${left}%`;
        confetti.style.width = `${size}px`;
        confetti.style.height = `${size * 1.5}px`;
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        confetti.style.opacity = '0';
        
        confettiContainer.appendChild(confetti);
        
        // –ê–Ω–∏–º–∞—Ü–∏—è
        setTimeout(() => {
          confetti.style.transition = `all ${duration}ms cubic-bezier(0,0,0.2,1)`;
          confetti.style.opacity = '0.8';
          confetti.style.top = '100%';
          confetti.style.transform = `rotate(${Math.random() * 720}deg)`;
          
          setTimeout(() => {
            confetti.style.opacity = '0';
          }, duration - 500);
          
          setTimeout(() => {
            if (confetti.parentNode) {
              confetti.parentNode.removeChild(confetti);
            }
          }, duration);
        }, delay);
      }
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    function handleClick() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞—É–¥–∏–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ
      if (!audioInitialized) {
        initAudio();
      }
      
      // –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
      const now = Date.now();
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–∫–∞
      if (now - gameState.lastClickTime < 1000) {
        gameState.streak++;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–∏–∫–∞
        if (gameState.streak > gameState.maxStreak) {
          gameState.maxStreak = gameState.streak;
          
          // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤–æ–º —Ä–µ–∫–æ—Ä–¥–µ —Å—Ç—Ä–∏–∫–∞
          if (gameState.maxStreak % 10 === 0) {
            showAchievement(`üî• –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥ —Å—Ç—Ä–∏–∫–∞: ${gameState.maxStreak}!`, 'warning');
          }
        }
      } else {
        gameState.streak = 1;
      }
      
      gameState.lastClickTime = now;
      
      // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
      gameState.count++;
      gameState.totalClicks++;
      
      // –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–ª–∏–∫–æ–≤
      if (gameState.totalClicks > 1) {
        const timeDiff = (now - gameState.startTime) / 1000;
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
      counterElement.classList.add('counter-animation');
      setTimeout(() => {
        counterElement.classList.remove('counter-animation');
      }, 300);
      
      updateUI();
      
      // –≠—Ñ—Ñ–µ–∫—Ç—ã
      playSound();
      vibrate();
      
      // –ü–æ–∑–∏—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –¥–ª—è —á–∞—Å—Ç–∏—Ü
      const rect = clickBtn.getBoundingClientRect();
      const x = rect.left + rect.width / 2;
      const y = rect.top + rect.height / 2;
      
      createParticles(x, y);
      
      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      if (gameState.count === 1) {
        showAchievement('üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫!', 'success');
      } else if (gameState.count === 10) {
        showAchievement('‚≠ê 10 –∫–ª–∏–∫–æ–≤! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!', 'success');
      } else if (gameState.count === 50) {
        showAchievement('üî• 50 –∫–ª–∏–∫–æ–≤! –¢—ã –Ω–∞ –æ–≥–Ω–µ!', 'success');
      } else if (gameState.count === 100) {
        showAchievement('üíØ –°–¢–û –ö–õ–ò–ö–û–í! –õ–µ–≥–µ–Ω–¥–∞!', 'success');
        createConfetti();
      } else if (gameState.count % 100 === 0) {
        showAchievement(`üöÄ ${gameState.count} –∫–ª–∏–∫–æ–≤! –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ä–µ–∫–æ—Ä–¥!`, 'warning');
        createConfetti();
      }
      
      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      saveGameState();
    }
    
    // –°–±—Ä–æ—Å –∏–≥—Ä—ã
    function resetGame() {
      if (gameState.count === 0 && gameState.totalClicks === 0) return;
      
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
        gameState = {
          count: 0,
          totalClicks: 0,
          streak: 0,
          maxStreak: 0,
          lastClickTime: 0,
          startTime: Date.now()
        };
        
        updateUI();
        saveGameState();
        showAchievement('üîÑ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω!', 'success');
      }
    }
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
    function shareToTelegram() {
      const text = `üéÆ –Ø –Ω–∞–±—Ä–∞–ª ${gameState.count} –æ—á–∫–æ–≤ –≤ Telegram Clicker Pro!\nüî• –ú–æ–π –ª—É—á—à–∏–π —Å—Ç—Ä–∏–∫: ${gameState.maxStreak}\n\n–ü–æ–ø—Ä–æ–±—É–π –ø–æ–±–∏—Ç—å –º–æ–π —Ä–µ–∫–æ—Ä–¥: https://t.me/your_clicker_bot`;
      
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram WebApp –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
      Telegram.WebApp.sendData(JSON.stringify({
        type: 'share_result',
        score: gameState.count,
        maxStreak: gameState.maxStreak,
        message: text
      }));
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ
      showAchievement('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram!', 'success');
      shareModal.classList.remove('show');
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    function init() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
      initSettings();
      
      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
      loadGameState();
      
      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞
      if (!gameState.startTime) {
        gameState.startTime = Date.now();
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      clickBtn.addEventListener('click', handleClick);
      resetBtn.addEventListener('click', resetGame);
      
      shareBtn.addEventListener('click', () => {
        shareModal.classList.add('show');
      });
      
      closeShareModal.addEventListener('click', () => {
        shareModal.classList.remove('show');
      });
      
      telegramShare.addEventListener('click', shareToTelegram);
      
      settingsBtn.addEventListener('click', () => {
        settingsModal.classList.add('show');
      });
      
      closeSettings.addEventListener('click', () => {
        settingsModal.classList.remove('show');
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
      settingsModal.addEventListener('click', (e) => {
        if (e.target === settingsModal) {
          settingsModal.classList.remove('show');
        }
      });
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–ª–∏–∫–æ–≤
      setInterval(() => {
        if (gameState.totalClicks > 0) {
          const now = Date.now();
          const timeDiff = (now - gameState.startTime) / 1000;
        }
      }, 1000);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
      setTimeout(() => {
        showAchievement('üöÄ Telegram Clicker Pro v1.0.0 –∑–∞–ø—É—â–µ–Ω!', 'success');
      }, 1000);
    }
    
    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('DOMContentLoaded', init);
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    window.addEventListener('beforeunload', () => {
      saveGameState();
    });
  </script>
</body>
</html>
